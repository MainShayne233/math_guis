<!DOCTYPE HTML>
<html>

<head>


<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'],['\\(','\\)']],
    processClass: "mathjax",
    ignoreClass: "no-mathjax"
  }
});

</script>

<script type="text/javascript"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

</head>


<body>
	<form>
		a:<br>
		<input type="number" id="a">
		<br>
		b:<br>
		<input type="number" id="b">
		<br>
		c:<br>
		<input type="number" id="c">
		<br>
	</form>
	<button onclick="quad_equation()">Consult Quadratic Equation</button>


<p class="mathjax" id="solution">

</p>

</body>

<script>

function get_nums(){
	var a = parseFloat(document.getElementById("a").value);
	var b = parseFloat(document.getElementById("b").value);
	var c = parseFloat(document.getElementById("c").value);
	return [a,b,c];
}


function inner_sqrt_value(nums){
	var a = nums[0];
	var b = nums[1];
	var c = nums[2];
	return Math.pow(b,2)-4*a*c;
}


//case 1: positive
//case -1: negative
//case 0: zero
function neg_pos_zero(sqrt){
	var props = [0,0,0];
	if (sqrt < 0){
		return -1;
	}
	else if (sqrt == 0){
		return 0;
	}
	return 1;
}


function is_sqr(n){
	if (Math.pow(n,0.5) == parseInt(Math.pow(n,0.5))){
		return true;
	}
	return false;
}

function sqr_fact(sqrt){
	for (i = 1; i <= sqrt; i++){
		if (is_sqr(sqrt/i)){
			return (sqrt/i);
		}
	}
	return 1;
}


function sqrt_case(sqrt){
	if (sqrt < 0){
		sqrt = sqrt*(-1);
	}
	var fac = sqr_fact(sqrt);
	if (fac == sqrt){
		return [Math.pow(sqrt,0.5),1];
	}
	else if (fac == 1){
		return [1,sqrt];
	}
	else{
		return [Math.pow(fac,0.5),sqrt/fac];
	}
}

function sqrt_properties(sqrt){
	sqrt_prop = [0, 0];
	sqrt_prop[0] = neg_pos_zero(sqrt);
	sqrt_prop[1] = sqrt_case(sqrt);
	return sqrt_prop;
}


function gcd(values){
	var largest = 0;
	for (i = 0; i < values.length; i++){
		if (Math.abs(values[i]) > largest){
			largest = Math.abs(values[i]);
		}
	}
  var flag;
	for (i=largest; i > 0; i--){
        flag = 0;
		for (j=0; j < values.length; j++){
			if (values[j]%i != 0){
              flag = 1;
            }
		}
		if (flag == 0){
			return i;
		}
	}
	return 1;
}





//which = 1 means plus
//which = -1 means minus
function sol_form(nums,sqrt_prop,which){
	var form = [0,0,0,0,0]
	var div;
	var w_val
	form[0] = nums[1]*-1;
	form[1] = sqrt_prop[1][0];
	form[2] = sqrt_prop[1][1];
	form[3] = sqrt_prop[0];
	form[4] = nums[0]*2;
	//if the whole square root thing is just 0
	if (form[3] == 0){
		form[1] = 0;
		form[2] = 0;
		div = gcd([form[0],form[4]]);
		form[0] /= div;
		form[4] /= div;
	}
	//if there is a mixed whole number and square root
	else if(form[1] > 1 && form[2] > 1){
		div = gcd([form[0], form[1], form[4]]);
		form[0] /= div;
		form[1] /= div;
		form[4] /= div;
	}
	//if there is just a whole number on the right, and no i
	else if (form[1] > 1 && form[2] == 1 && form[3] == 1){
		if (which == 1){
			w_val = form[0] + form[1];
		}
		else{
			w_val = form[0] - form[1];
		}
		div = gcd([w_val, form[4]]);
		form[0] = w_val / div;
		form[4] /= div;
		form[1] = 0;
		form[2] = 0;
		form[3] = 0;
	}
	//if there is just a whole number on the right, and an i
	else if (form[1] > 1 && form[2] == 1 && form[3] == -1){
		div = gcd([form[0],form[1],form[4]])
		form[0] /= div;
		form[1] /= div;
		form[4] /= div;
	}
	//if there is just a square root on the right
	else if (form[1] == 1 && form[2] > 1){
		//no change, no reducing
	}
	return form;
}

function sol_string(sol,which){
	var op;
	if (which == 1){
		op = "+";
	}
	else if (which == -1){
		alert("op set");
		op = "-";
	}
	//just fraction
	if (sol[0] != 0 && sol[1] == 0 && sol[2] == 0 && sol[3] == 0 && sol[4] != 0 && sol[4] != 0){
		return "\\frac{" + sol[0].toString() + "}{" + sol[4].toString() + "}";
	}
	//number + just square root over den
	// -1 1 17 1 2
	//\frac{-1+\sqrt{17}}{2}
	else if (sol[0] != 0 && sol[1] == 1 && sol[2] != 0 && sol[3] == 1 && sol[4] != 0 && sol[4] != 1){
		return "$$\\frac{" + sol[0].toString() + op + "\\sqrt{" + sol[2].toString() + "}}{" + sol[4].toString() + "}$$";
	}
}



//sqrt_prop[neg_pos_zero,[coe, sqrt]]
function quad_equation() {
	var nums = get_nums();
	var sqrt = inner_sqrt_value(nums);
	var sqrt_prop = sqrt_properties(sqrt);
	var sol1 = sol_form(nums,sqrt_prop,1);	
	var sol2 = sol_form(nums,sqrt_prop,-1);
	/*
	alert(sol1);
	alert(sol2);
	*/
	var sol1_string = sol_string(sol1,1);
	var sol2_string = sol_string(sol2,-1);
	//alert(sol1_string);
	//alert(sol2_string);
	document.getElementById("solution").innerHTML = "Soluton 1:" + sol1_string + "Solution 2: " + sol2_string;
	MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
}


</script>

</html>